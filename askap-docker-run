#/bin/bash
# Set up the X11 stuff ...
XSOCK=/tmp/.X11-unix
XAUTH=/tmp/.docker.xauth
xauth nlist :0 | sed -e 's/^..../ffff/' | xauth -f $XAUTH nmerge -

IMAGE=$1
VERSION=${2:-latest}

# run the specified image
docker run \
 --hostname $IMAGE \
 --tty \
 --interactive \
 --rm \
 --volume $XSOCK:$XSOCK -v $XAUTH:$XAUTH -e XAUTHORITY=$XAUTH \
 --mount type=bind,source="$HOME/code/askap-builds/",target=/askap-builds/ \
 --mount source=$IMAGE,target=/home/askap/ \
 $IMAGE:$VERSION
